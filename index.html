<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Xec v2 Obfuscator</title>
    <style>
        :root { --bg: #0b0b0b; --accent: #00ffaa; --border: #222; --text: #888; }
        body { 
            background: var(--bg); color: #eee; font-family: 'Inter', 'Segoe UI', sans-serif; 
            margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .container { width: 900px; padding: 40px; }
        .header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .header h1 { font-size: 18px; letter-spacing: 4px; margin: 0; color: #fff; }
        .header span { font-size: 10px; color: var(--text); font-weight: bold; }

        .section { margin-bottom: 20px; }
        .label { font-size: 9px; color: var(--text); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; }
        
        textarea { 
            width: 100%; background: #000; color: var(--accent); border: 1px solid var(--border); 
            padding: 15px; box-sizing: border-box; border-radius: 4px; resize: none; 
            font-family: 'Fira Code', 'Consolas', monospace; font-size: 11px; outline: none;
        }
        textarea:focus { border-color: #444; }

        .controls { display: flex; gap: 10px; margin: 20px 0; }
        button { 
            background: transparent; border: 1px solid var(--border); color: #fff; 
            padding: 10px 25px; font-size: 11px; cursor: pointer; text-transform: uppercase; 
            letter-spacing: 1px; transition: 0.2s;
        }
        button:hover { background: #fff; color: #000; border-color: #fff; }
        .btn-obf { border-color: var(--accent); color: var(--accent); }
        .btn-obf:hover { background: var(--accent); color: #000; border-color: var(--accent); }

        .footer { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-top: 30px; border-top: 1px solid var(--border); padding-top: 15px;
            font-size: 10px; color: var(--text);
        }
        .contact-link { color: var(--text); text-decoration: none; transition: 0.2s; border-bottom: 1px solid transparent; }
        .contact-link:hover { color: #fff; border-bottom: 1px solid #fff; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Xec V2 | #1 Best luau Obfuscator</h1>
            <span>Version: 0.25.2a</span>
        </div>

        <div class="section">
            <div class="label">Header comments</div>
            <textarea id="ascii" style="height: 100px;" placeholder="-- Ascii or smth here."></textarea>
        </div>

        <div class="section">
            <div class="label">luau</div>
            <textarea id="source" style="height: 180px;" placeholder="-- Input."></textarea>
        </div>

        <div class="controls">
            <button class="btn-obf" onclick="build()">Obfuscate</button>
            <button onclick="copy()">Copy</button>
            <button onclick="clearAll()">Clear</button>
        </div>

        <div class="section">
            <div class="label">Output</div>
            <textarea id="output" style="height: 180px;" readonly></textarea>
        </div>

        <div class="footer">
            <div>&copy; XEC V2</div>
            <div>Deobfuscate: <a href="https://discord.com/users/718smiley.png" target="_blank" class="contact-link">L_EpicGuy</a></div>
        </div>
    </div>

    <script>
        function build() {
            const ascii = document.getElementById('ascii').value;
            const src = document.getElementById('source').value;
            if(!src) return;

            const inv = "\u2004"; 
            let head = "";
            if(ascii) {
                ascii.split('\n').forEach(l => { head += "--" + l.replace(/ /g, inv) + "\n"; });
                head += "--\n--\n--\n--\n--\n--\n";
            } else {
                head = "--\n--\n--\n--\n--\n--\n";
            }

            const salt = Math.floor(Math.random() * 50) + 100;
            const bytes = new TextEncoder().encode(src);
            let hex = "";
            for (let b of bytes) { hex += (b ^ salt).toString(16).padStart(2, '0'); }

            const chunks = hex.match(/.{1,100}/g);
            let res = head + `--[[ Obfuscated by Xec v2 ]]\nlocal _v = ""\n`;
            chunks.forEach(c => { res += `_v = _v .. "${c}"\n`; });
            res += `\nlocal _k = ${salt}\nlocal _b = {}\nfor i=1,#_v,2 do table.insert(_b,string.char(bit32.bxor(tonumber(_v:sub(i,i+1),16),_k))) end\nloadstring(table.concat(_b))()`;

            document.getElementById('output').value = res;
        }

        function copy() {
            const el = document.getElementById('output');
            el.select();
            document.execCommand('copy');
        }

        function clearAll() {
            document.getElementById('ascii').value = "";
            document.getElementById('source').value = "";
            document.getElementById('output').value = "";
        }
    </script>
</body>
</html>
